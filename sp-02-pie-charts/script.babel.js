function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var data=[{per:30/360,fill:"#37c"},{per:35/360,fill:"#3c7"},{per:45/360,fill:"orange"},{per:90/360,fill:"#f73"}],$pieConicGradient=document.querySelector(".pie-conic-gradient"),$pieSvgPath=document.querySelector(".pie-svg-path"),$pieSvgDash=document.querySelector(".pie-svg-dash"),$pieCanvas=document.querySelector(".pie-canvas");var PieConicGradient=function(){function PieConicGradient(elem,data){_classCallCheck(this,PieConicGradient);_defineProperty(this,"elem",null);_defineProperty(this,"data",[]);this.elem=elem;this.data=data;this.elem.style.borderRadius="50%";this.elem.style.backgroundColor="#ccc";this._render()}return _createClass(PieConicGradient,[{key:"_render",value:function _render(){var gradientArr=[],θ=0;this.data.forEach(function(item){gradientArr.push("".concat(item.fill," ").concat(θ,"deg, ").concat(item.fill," ").concat(θ+=360*item.per,"deg"))});this.elem.style.backgroundImage="conic-gradient(".concat(gradientArr.join(","),", rgba(0, 0, 0, 0) ").concat(θ,"deg)")}},{key:"update",value:function update(data){this.data=data;this._render()}}])}();var pieConicGradient=new PieConicGradient($pieConicGradient,data);var PieSvgPath=function(){function PieSvgPath(elem,data){_classCallCheck(this,PieSvgPath);_defineProperty(this,"elem",null);_defineProperty(this,"data",[]);_defineProperty(this,"pies",[]);this.elem=elem;this.data=data;this.elem.setAttribute("viewBox","0 0 100 100");this.elem.innerHTML="<circle cx=\"50\" cy=\"50\" r=\"50\" fill=\"#ccc\" />";this._render()}return _createClass(PieSvgPath,[{key:"_render",value:function _render(){var _this=this;var θ=-Math.PI/2,x=50,y=0,pie=null,θper=0,endX=0,endY=0;this.pies.length=this.data.length;this.data.forEach(function(item,i){if(!_this.pies[i]){_this.pies[i]=document.createElementNS("http://www.w3.org/2000/svg","path");_this.elem.appendChild(_this.pies[i])}θ+=Math.PI*2*item.per;θper=Math.PI*2*item.per;endX=Math.cos(θ)*50+50;endY=Math.sin(θ)*50+50;pie=_this.pies[i];pie.setAttribute("d","M 50 50 L ".concat(x," ").concat(y," A 50 50 0 ").concat(θper>Math.PI?1:0," 1 ").concat(endX," ").concat(endY," Z"));pie.setAttribute("fill",item.fill);x=endX;y=endY})}},{key:"update",value:function update(data){this.data=data;this._render()}}])}();var pieSvgPath=new PieSvgPath($pieSvgPath,data);var PieSvgDash=function(){function PieSvgDash(elem,data){_classCallCheck(this,PieSvgDash);_defineProperty(this,"elem",null);_defineProperty(this,"data",[]);_defineProperty(this,"pies",[]);this.elem=elem;this.data=data;this.elem.setAttribute("viewBox","0 0 100 100");this.elem.innerHTML="<circle cx=\"50\" cy=\"50\" r=\"25\" stroke-width=\"50\" stroke=\"#ccc\" />";this._render()}return _createClass(PieSvgDash,[{key:"_render",value:function _render(){var _this2=this;var C=Math.PI*2*25,length=0,lengthPer=0,pie=null;this.pies.length=this.data.length;this.data.forEach(function(item,i){if(!_this2.pies[i]){_this2.pies[i]=document.createElementNS("http://www.w3.org/2000/svg","circle");_this2.elem.appendChild(_this2.pies[i])}lengthPer=C*item.per;pie=_this2.pies[i];pie.setAttribute("cx",50);pie.setAttribute("cy",50);pie.setAttribute("r",25);pie.setAttribute("stroke",item.fill);pie.setAttribute("stroke-width",50);pie.setAttribute("stroke-dasharray","0 ".concat(length," ").concat(lengthPer," ").concat(C));pie.setAttribute("fill-opacity",0);pie.setAttribute("transform","rotate(-90, 50, 50)");length+=lengthPer})}},{key:"update",value:function update(data){this.data=data;this._render()}}])}();var pieSvgDash=new PieSvgDash($pieSvgDash,data);var PieCanvas=function(){function PieCanvas(elem,data){var _this3=this;_classCallCheck(this,PieCanvas);_defineProperty(this,"elem",null);_defineProperty(this,"cvsCtx",null);_defineProperty(this,"data",[]);this.elem=elem;this.cvsCtx=this.elem.getContext("2d");this.data=data;this.elem.width=this.elem.height=this.elem.offsetWidth*window.devicePixelRatio;this._render();window.addEventListener("resize",function(){_this3.elem.width=_this3.elem.height=_this3.elem.offsetWidth*window.devicePixelRatio;_this3._render()})}return _createClass(PieCanvas,[{key:"_render",value:function _render(){var cvsCtx=this.cvsCtx,halfCvsSize=this.elem.width/2,θ=-Math.PI/2;cvsCtx.clearRect(0,0,this.elem.width,this.elem.height);cvsCtx.beginPath();cvsCtx.fillStyle="#ccc";cvsCtx.arc(halfCvsSize,halfCvsSize,halfCvsSize,0,Math.PI*2,false);cvsCtx.fill();this.data.forEach(function(item){cvsCtx.beginPath();cvsCtx.fillStyle=item.fill;cvsCtx.moveTo(halfCvsSize,halfCvsSize);cvsCtx.arc(halfCvsSize,halfCvsSize,halfCvsSize,θ,θ+=Math.PI*2*item.per,false);cvsCtx.closePath();cvsCtx.fill()})}},{key:"update",value:function update(data){this.data=data;this._render()}}])}();var pieCanvas=new PieCanvas($pieCanvas,data);(function(){var $playPause=document.querySelector("#play-pause"),lastTime=0,percent=0;requestAnimationFrame(function update(){if(Date.now()-lastTime>16&&$playPause.checked){lastTime=Date.now();percent=(percent+0.005)%1;data[0].per=20/360*percent;data[1].per=50/360*percent;data[2].per=100/360*percent;data[3].per=190/360*percent;pieConicGradient.update(data);pieSvgPath.update(data);pieSvgDash.update(data);pieCanvas.update(data)}requestAnimationFrame(update)})})();