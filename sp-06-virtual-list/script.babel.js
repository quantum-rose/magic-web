function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var ListItem=function(){function ListItem(template,index,height){_classCallCheck(this,ListItem);_defineProperty(this,"_visible",false);this.template=template;this.index=index;this.height=height;this.node=null}return _createClass(ListItem,[{key:"visible",get:function get(){return this._visible},set:function set(val){this._visible=val;if(val&&!this.node){this.node=document.createElement("li");this.node.style.top=this.index*this.height+"px";this.node.innerHTML=this.template}}}])}();var VirtualList=function(){function VirtualList(elem,listItems,itemHeight){var _this=this;_classCallCheck(this,VirtualList);_defineProperty(this,"_onscroll",function(e){var newStart=Math.floor(_this.$root.scrollTop/_this.itemHeight);var newEnd=Math.min(newStart+_this.visibleCount,_this.listItems.length)-1;if(newEnd<_this.start||newStart>_this.end){for(var i=_this.start;i<=_this.end;i++){_this.listItems[i].visible=false;_this.$list.removeChild(_this.listItems[i].node)}for(var _i=newStart;_i<=newEnd;_i++){_this.listItems[_i].visible=true;_this.$list.append(_this.listItems[_i].node)}}else if(newStart<_this.start){for(var _i2=newEnd+1;_i2<=_this.end;_i2++){_this.listItems[_i2].visible=false;_this.$list.removeChild(_this.listItems[_i2].node)}for(var _i3=newStart;_i3<_this.start;_i3++){_this.listItems[_i3].visible=true;_this.$list.prepend(_this.listItems[_i3].node)}}else if(newEnd>_this.end){for(var _i4=_this.start;_i4<newStart;_i4++){_this.listItems[_i4].visible=false;_this.$list.removeChild(_this.listItems[_i4].node)}for(var _i5=_this.end+1;_i5<=newEnd;_i5++){_this.listItems[_i5].visible=true;_this.$list.append(_this.listItems[_i5].node)}}_this.start=newStart;_this.end=newEnd});this.$root=elem;this.listItems=listItems;this.itemHeight=itemHeight;this.$list=document.createElement("ul");this.$list.classList.add("list");this.$list.style.height=this.listItems.length*this.itemHeight+"px";this.$root.appendChild(this.$list);this.height=this.$root.offsetHeight;this.visibleCount=Math.ceil(this.height/this.itemHeight)+1;this.start=Math.floor(this.$root.scrollTop/this.itemHeight);this.end=Math.min(this.start+this.visibleCount,this.listItems.length)-1;for(var i=this.start;i<=this.end;i++){this.listItems[i].visible=true;this.$list.append(this.listItems[i].node)}this.$root.addEventListener("scroll",this._onscroll)}return _createClass(VirtualList,[{key:"scrollTo",value:function scrollTo(index){if(index<0){index=0}if(index>this.listItems.length-1){index=this.listItems.length-1}this.$root.scrollTop=index*this.itemHeight}}])}();var listItems=[];for(var i=0;i<100000;i++){listItems[i]=new ListItem("<div class=\"container\"><div class=\"img\"></div><div class=\"text\"><input type=\"text\" placeholder=\"".concat(i,"\" /></div></div>"),i,120)}var $virtualList=document.querySelector(".virtual-list");var virtualList=new VirtualList($virtualList,listItems,120);var $input=document.querySelector("#index");var $go=document.querySelector(".go");$go.addEventListener("click",function(){virtualList.scrollTo($input.value)});$input.addEventListener("keyup",function(e){if(e.keyCode===13){virtualList.scrollTo($input.value)}});